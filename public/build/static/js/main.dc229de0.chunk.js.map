{"version":3,"sources":["page/Home.tsx","component/ImgLoader.tsx","component/MovieForm.tsx","component/CommonType.ts","Service/MovieService.ts","page/movie/AddMovie.tsx","page/movie/EditMovie.tsx","assets/defaultPosterImg.png","component/MovieTable.tsx","redux/action/MovieAction.ts","page/movie/MovieList.tsx","page/Layout.tsx","redux/reducer/Moviereducer.ts","redux/reducer/RootReducer.ts","redux/store.ts","App.tsx","index.tsx"],"names":["Home","state","curImg","React","Component","ImgLoader","showModel","this","props","PlusOutlined","style","marginTop","uid","name","url","p","formData","FormData","append","filename","file","request","Request","action","method","body","fetch","then","result","json","resp","err","message","error","success","onChange","data","listType","accept","fileList","getFileList","customRequest","requestImg","bind","onRemove","onPreview","setState","getUploadContent","visible","footer","onCancel","width","src","formItemLayout","labelCol","span","offset","wrapperCol","areasOptions","label","value","typeOptions","isValidKey","key","object","SwitchType","withRouter","Form","useForm","form","useState","imgSrc","setImgSrc","onFinish","values","a","console","log","onSubmit","history","push","useEffect","movie","setFieldsValue","Item","rules","required","initialValue","min","step","Group","options","valuePropName","placeholder","autoSize","minRows","maxRows","type","htmlType","MovieService","axios","post","id","put","delete","get","condition","params","AddMovie","add","EditMovie","undefined","findById","match","edit","MovieTable","onLoad","padding","marginBottom","display","e","onChangeKey","target","onPressEnter","onSearch","icon","SearchOutlined","size","onClick","title","dataIndex","render","poster","className","alt","filterDropdown","getFilterDropdown","filterIcon","text","join","isClassic","record","checked","newValue","onSwitchState","_id","isHot","isSoonComing","to","okText","cancelText","onConfirm","onDeleteMovie","danger","total","current","page","pageSize","limit","rowKey","dataSource","columns","getColums","pagination","getPageConfig","loading","isLoading","onChangePage","saveMovieData","payload","setIsLoaing","setCondition","deleteMovieAction","changeSwitchType","newState","fetchMovie","dispatch","getState","searchCondition","find","deleteMovie","switchChange","MovieList","connect","MovieAction","Header","Layout","Sider","Content","_Layout","minHeight","mode","theme","path","component","exact","defaultState","totalPage","saveMovie","Math","ceil","setLoading","changeSwitch","item","newMovie","map","filter","rootReducer","combineReducers","store","createStore","applyMiddleware","thunk","logger","App","ReactDOM","document","getElementById","subscribe"],"mappings":"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","file":"static/js/main.dc229de0.chunk.js","sourcesContent":["import React from \"react\";\r\nexport class Home extends React.Component {\r\n  state = {\r\n    curImg: \"\",\r\n  };\r\n  render() {\r\n    return (\r\n      <div>欢迎来到电影管理系统</div>\r\n    );\r\n  }\r\n}\r\n","import { message, Modal, Upload } from \"antd\";\r\nimport React from \"react\";\r\nimport { PlusOutlined } from \"@ant-design/icons\";\r\nimport { UploadFile } from \"antd/lib/upload/interface\";\r\n\r\ninterface IImgProps {\r\n  curImg?: string;\r\n  onChange: (imgSrc: string) => void;\r\n}\r\ninterface IImgState {\r\n  showModel: boolean;\r\n}\r\nexport class ImgLoader extends React.Component<IImgProps, IImgState> {\r\n  state = {\r\n    showModel: false,\r\n  };\r\n  private getUploadContent() {\r\n    if (this.props.curImg) {\r\n      return null;\r\n    } else {\r\n      return (\r\n        <div>\r\n          <PlusOutlined />\r\n          <div style={{ marginTop: 8 }}>点击上传</div>\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n  private getFileList(): UploadFile<any>[] {\r\n    if (this.props.curImg) {\r\n      return [\r\n        {\r\n          uid: this.props.curImg,\r\n          name: this.props.curImg,\r\n          url: this.props.curImg,\r\n        },\r\n      ];\r\n    } else {\r\n      return [];\r\n    }\r\n  }\r\n  private async requestImg(p: any) {\r\n    const formData = new FormData();\r\n    formData.append(p.filename, p.file);\r\n    const request = new Request(p.action, {\r\n      method: \"post\",\r\n      body: formData,\r\n    });\r\n    const resp = await fetch(request).then((result) => result.json());\r\n    if (resp.err) {\r\n      message.error(\"上传失败\");\r\n    } else {\r\n      message.success(\"上传成功\");\r\n      this.props.onChange(resp.data!);\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <>\r\n        <Upload\r\n          action=\"/api/upload\"\r\n          listType=\"picture-card\"\r\n          name=\"imgfile\"\r\n          accept=\"image/png, image/jpeg\"\r\n          fileList={this.getFileList()}\r\n          customRequest={this.requestImg.bind(this)}\r\n          onRemove={() => {\r\n            this.props.onChange(\"\");\r\n          }}\r\n          onPreview={() => {\r\n            this.setState({\r\n              showModel: true,\r\n            });\r\n          }}\r\n        >\r\n          {this.getUploadContent()}\r\n        </Upload>\r\n        <Modal\r\n          visible={this.state.showModel}\r\n          footer={null}\r\n          onCancel={() => {\r\n            this.setState({\r\n              showModel: false,\r\n            });\r\n          }}\r\n        >\r\n          <img style={{ width: \"100%\" }} src={this.props.curImg} />\r\n        </Modal>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import {\r\n  Form,\r\n  Input,\r\n  Button,\r\n  Checkbox,\r\n  Switch,\r\n  InputNumber,\r\n  message,\r\n} from \"antd\";\r\nimport TextArea from \"antd/lib/input/TextArea\";\r\nimport React, { useState } from \"react\";\r\nimport { RouteComponentProps, withRouter } from \"react-router\";\r\nimport { IMovie } from \"../Service/MovieService\";\r\nimport { ImgLoader } from \"./ImgLoader\";\r\n\r\nconst formItemLayout = {\r\n  labelCol: {\r\n    span: 4,\r\n    offset: 1,\r\n  },\r\n  wrapperCol: {\r\n    span: 18,\r\n  },\r\n};\r\nconst areasOptions = [\r\n  { label: \"中国大陆\", value: \"中国大陆\" },\r\n  { label: \"欧美市场\", value: \"欧美市场\" },\r\n  { label: \"日韩地区\", value: \"日韩地区\" },\r\n];\r\nconst typeOptions = [\r\n  { label: \"喜剧\", value: \"喜剧\" },\r\n  { label: \"动作\", value: \"动作\" },\r\n  { label: \"悬疑\", value: \"悬疑\" },\r\n  { label: \"古装\", value: \"古装\" },\r\n  { label: \"校园\", value: \"校园\" },\r\n];\r\ninterface IFormProp extends RouteComponentProps {\r\n  onSubmit: (movie: IMovie) => Promise<string>;\r\n  movie?: IMovie;\r\n}\r\nexport function isValidKey(\r\n  key: string | number | symbol,\r\n  object: object\r\n): key is keyof typeof object {\r\n  return key in object;\r\n}\r\nconst MovieForm: React.FC<IFormProp> = function (props) {\r\n  const [form] = Form.useForm();\r\n  const [imgSrc, setImgSrc] = useState(\"\");\r\n  const onFinish = async (values: IMovie) => {\r\n    console.log(values);\r\n    const resp = await props.onSubmit(values);\r\n    if (resp) {\r\n      message.error(resp);\r\n    } else {\r\n      message.success(\"上传成功\", 1, () => {\r\n        props.history.push(\"/movie\");\r\n      });\r\n    }\r\n  };\r\n  React.useEffect(() => {\r\n    if (props.movie) {\r\n      for (const key in props.movie) {\r\n        if (isValidKey(key, props.movie)) {\r\n          if (key === \"poster\") {\r\n            setImgSrc(props.movie[key]);\r\n          } else {\r\n            form.setFieldsValue({ [key]: props.movie[key] });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  });\r\n  return (\r\n    <Form\r\n      form={form}\r\n      style={{ width: \"600px\", marginTop: \"20px\" }}\r\n      {...formItemLayout}\r\n      onFinish={onFinish}\r\n    >\r\n      <Form.Item\r\n        name=\"name\"\r\n        label=\"电影名称\"\r\n        rules={[{ required: true, message: \"电影名称不能为空\" }]}\r\n      >\r\n        <Input />\r\n      </Form.Item>\r\n      <Form.Item name=\"poster\" label=\"电影封面\">\r\n        <ImgLoader curImg={imgSrc} onChange={(imgSrc) => setImgSrc(imgSrc)} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name=\"timelong\"\r\n        label=\"时长(分钟)\"\r\n        initialValue={100}\r\n        rules={[{ required: true, message: \"时长不能为空\" }]}\r\n      >\r\n        <InputNumber min={1} step={10} />\r\n      </Form.Item>\r\n      <Form.Item\r\n        name=\"areas\"\r\n        label=\"上映地区\"\r\n        rules={[{ required: true, message: \"上映地区不能为空\" }]}\r\n      >\r\n        <Checkbox.Group options={areasOptions}></Checkbox.Group>\r\n      </Form.Item>\r\n      <Form.Item\r\n        name=\"types\"\r\n        label=\"电影类型\"\r\n        rules={[{ required: true, message: \"电影类型不能为空\" }]}\r\n      >\r\n        <Checkbox.Group options={typeOptions}></Checkbox.Group>\r\n      </Form.Item>\r\n      <Form.Item\r\n        valuePropName=\"checked\"\r\n        name=\"isHot\"\r\n        label=\"是否火爆\"\r\n        initialValue={false}\r\n      >\r\n        <Switch />\r\n      </Form.Item>\r\n      <Form.Item\r\n        valuePropName=\"checked\"\r\n        name=\"isClassic\"\r\n        label=\"经典电影\"\r\n        initialValue={false}\r\n      >\r\n        <Switch />\r\n      </Form.Item>\r\n      <Form.Item\r\n        valuePropName=\"checked\"\r\n        name=\"isSoonComing\"\r\n        label=\"即将上映\"\r\n        initialValue={false}\r\n      >\r\n        <Switch />\r\n      </Form.Item>\r\n      <Form.Item name=\"desc\" label=\"描述\">\r\n        <TextArea\r\n          placeholder=\"请输入电影描述\"\r\n          autoSize={{ minRows: 2, maxRows: 6 }}\r\n        />\r\n      </Form.Item>\r\n      <Form.Item labelCol={{ span: 0 }} wrapperCol={{ span: 19, offset: 5 }}>\r\n        <Button type=\"primary\" htmlType=\"submit\">\r\n          提交\r\n        </Button>\r\n      </Form.Item>\r\n    </Form>\r\n  );\r\n};\r\nexport default withRouter(MovieForm);\r\n","export enum SwitchType{\r\n    isHot=\"isHot\",\r\n    isClassic=\"isClassic\",\r\n    isSoonComing=\"isSoonComing\",\r\n}","import axios from \"axios\";\r\nimport { IResponseData, IResponseError, IResponsePageData, ISearchCondition } from \"./CommonType\";\r\nexport interface IMovie{\r\n    _id?:string;\r\n    name: string;\r\n\r\n    types: string[];\r\n\r\n    areas: string[];\r\n\r\n    timelong:number;\r\n\r\n    isHot:boolean;\r\n\r\n    isSoonComing:boolean;\r\n\r\n    isClassic:boolean;\r\n\r\n    desc?:string\r\n\r\n    poster?:string\r\n}\r\nexport class MovieService{\r\n    public static async add(movie:IMovie):Promise<IResponseData<IMovie> | IResponseError>{\r\n        const {data} = await axios.post(\"/api/movie\",movie);\r\n        return data;\r\n    }\r\n    public static async edit(id:string,movie:Partial<IMovie>):Promise<IResponseData<IMovie> | IResponseError>{\r\n        const {data} = await axios.put(\"/api/movie/\"+id,movie);\r\n        return data;\r\n    }\r\n    public static async delete(id:string):Promise<IResponseData<IMovie> | IResponseError>{\r\n        const {data} = await axios.delete(\"/api/movie/\"+id);\r\n        return data;\r\n    }\r\n    public static async findById(id:string):Promise<IResponseData<IMovie | null>>{\r\n        const {data} = await axios.get(\"/api/movie/\"+id);\r\n        return data;\r\n    }\r\n    public static async find(condition:ISearchCondition):Promise<IResponsePageData<IMovie>>{\r\n        const {data} = await axios.get(\"/api/movie\",{\r\n            params:condition,\r\n        });\r\n        return data;\r\n    }\r\n}","import React from 'react';\r\nimport MovieForm from '../../component/MovieForm';\r\nimport { MovieService } from '../../Service/MovieService';\r\nexport class AddMovie extends React.Component{\r\n    render(){\r\n        return(\r\n            <MovieForm onSubmit={async (movie)=>{\r\n                const resp = await MovieService.add(movie);\r\n                if(resp.err){\r\n                    return resp.err;\r\n                }\r\n                else{\r\n                    return \"\";\r\n                }\r\n            }}></MovieForm>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport { RouteComponentProps } from 'react-router';\r\nimport MovieForm from '../../component/MovieForm';\r\nimport { IMovie, MovieService } from '../../Service/MovieService';\r\n\r\ninterface IParmas{\r\n    id:string\r\n}\r\ninterface IEditState{\r\n    movie:IMovie,\r\n}\r\nexport class EditMovie extends React.Component<RouteComponentProps<IParmas>,IEditState>{\r\n    state:IEditState={\r\n        movie:undefined,\r\n    }\r\n    async componentDidMount(){\r\n        const resp = await MovieService.findById(this.props.match.params.id);\r\n        if(resp.err){\r\n            return;\r\n        }else{\r\n            this.setState({\r\n                movie:resp.data\r\n            })\r\n        }\r\n    }\r\n    render(){\r\n        return(\r\n            <MovieForm \r\n            movie={this.state.movie}\r\n            onSubmit={async (movie)=>{\r\n                const resp = await MovieService.edit(this.props.match.params.id,movie);\r\n                if(resp.err){\r\n                    return resp.err;\r\n                }\r\n                else{\r\n                    return \"\";\r\n                }\r\n            }}/>\r\n        )\r\n    }\r\n}","export default \"data:image/png;base64,/9j/4AAQSkZJRgABAQEAZABkAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAF6ASwDASIAAhEBAxEB/8QAGwABAQEAAwEBAAAAAAAAAAAAAAIBAwUGBwT/xABLEAABAwMCAgQFEQUFCQAAAAAAAQIRAwQFBiESMQcTQWEiUXGBshQVFhcjJjJVdJGTlKGxwdHSUlRWc/AkJ3KS4TM1NkJDYoKjs//EABoBAQEBAQEBAQAAAAAAAAAAAAABAgMEBQb/xAAlEQEAAwACAgEEAwEBAAAAAAAAAQIRAyESMUETMlFhIjNCcbH/2gAMAwEAAhEDEQA/APVrzMNXmYfm35sAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACm8iSm8ijF5mGrzMIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU3kSU3kUYvMw1eZhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACm8iSm8ijF5mGrzMIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU3kSU3kUYvMw1eZhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACm8iSm8ijF5mGrzMIAAAAAAAAAAAAAAAAAB4nVeGuadS9zC5yraW6NRW0afFu5GoiJ8JElVQ1WNnG+OsWnJnHaXmraFrqNmGZa1a9R3CiupKmzl3iF8SQvP7j0R8hx2BrPxDtQ3uVrWLFfDaraa1HulY4pRyLz2O+sdKXmTx7Ly11TeOo1EXg4qb2zCqn7fcdbcdY+Xo5OHjj/AFmfqfb6AY5zWNVznI1E5qq8j57r6rd4yywtCjd1mObTex7qb1bxq1GJK7+U/WnRzTq73mYuq69sNj71Uz4RkTMuccVYrFrWzf09dbZOxvLipQtrujWq00l7ab0dCeY/UecxGkcXgr9lxbXNx18K2KlRvhIvZCIknozFs3pyvFYn+M9AAMsgAAAAAAAAAAAAAAABTeRJTeRRi8zDV5mEAAAAAAAAAAAAAAAAA8frLDUszdWrVy9tadUi9ZTrVfHEKjZ58/sPYHnM5o6yz2SbeXFevTVtNKatpQkwqrMqi+M3ScnXXhtFb7M48ZnMV6gwap7LEvWM4Wts0qbKkomyca8vIZi7dq4ehU9mj7FVRf7Kj3eBuu0I/wA/I7LM6MxNvjazcXXWtftc1qMqXLEjfeeSJsfoxOl8K3B03XtC1XJ8LpbVvF4eKVieFypEQejzjx9/+Pb9Wvh7+fxDrtX0X173AYZ1y64rtpo11VebleqJKzv2Tufm1Vo6309i6V3SuqtZz6yU+FzURERWuWfsO4wOJrP1NcZjOXdqtVjvcuGs1Uc6IRU35InL/Q7DXFJcxira0sKlvWrLctdw9exqr4Lk2lUndUJFpiYrEs15JratInr5flwWhLai7HZRt7VV6JTr8CsSJhFg9yfkxdKrQxFlRrs4KzKDGvaizDkaiKnzn6zha02nt4+Xkte3cgAMOYAAAAAAAAAAAAAAAAU3kSU3kUYqCClTcQBMCCoEATAgqBAEwIKgQBMCCoEATAgqBAEwIKgQBMCCoEAfIK9DFXGuMozMV30Lbraio9q78XFsnJe87H1r0H8a1/8AMv6D8FW+tMfrrKVr3HpfUutqN6pWI7fi5wqHaeyjT/8ACNP6vT/I9c71mvp2i3Wb6j1MOL1r0H8a1/8AMv6DrFtsTR1niGYSu+4t1rUXOc5d0d1m6ck7EQ7j2Uaf/hKn9Xp/kdX642V9rfEV7LHJY0kqUmLSaxGy7jXwoSPGnzCN+dWvn3u+vmYfW4EFQIPI+WmBBUCAJgQVAgCYEFQIAmBBUCAJgQVAgCYEFQIAmBBUCAJgpE2EGomwVqpuoguBAEQILgQBECC4MgCYEFwZAEwILgQBECC4EARAguBAEQIKg/LkqNetirylauVlw+g9tJyO4VR6tWFns3LBEbL8ttp/G2mTq5KjQVt3VVyvqdY5eLiWV2mPsOyg+dN03rpGoiZleXbdPX8Dqc77LNPMoPvcxVVKyqjeruHLyiZ5eM6/T8p9vV9DznPOJl9bg6q805jb7K0cnXouddUVarHo9UROFZTblzPG0sBrmtRZVbmV4XtRyTcumF8xTtM65ekLmVjuu3p+BIpn+kjiis9Xh9FgQcVjTq0sfbU7hyurNpNbUVVmXIiSs9u5zwc8eaYTAguBBBECC4EARAguBAEQIKg2AIgQXAgCIEFwZAEwILgQBEGomxUGomxYGxuILVNxBVRAguBAEQILgQBECC4EARAguBAEQILgQDEQILgQBEHW3+exWLuW299e06FVzONGvndsqkzy7FO1g8/ntG4/UV7SurytdNdTYlNG0nNRqpKrvLVXt8ZaxG9tUiu/y9K9l+nvja3+dfyPCdImXscvWxjLG6pVmMSornNXZquVqb/Men9rHA/t3n0qfpPFu05YXOvm4SxdWW1Y7hqvc5FXwUl8LHm8p244puw9fDHFFvKsz0+lt1NgGMa1MvZwiQnuqB2qsAxJXLWnmqIv3Hzi30xYVekKrgnLW9SNmFRycezOLnHj7j2HtY4H9u8+lT9Jma0j3LFuPirmzPbvbDPYrKXLrexvadeq1nGrWTs2USZiO1DsoOiwWjsdp6+qXdlVuldUp9WrKj2q1ElFnZEWdvGegg52iN6ee8V3+PpECC4EEZRAguBHcBECC4EARAguBHcBECC4EARAguBAMRAguBAMRBSJsbBqJsCFRzEHIqCCq44EHJBkARAg5IEAccCO4uDYA44EHJBkARAguDYA44EFwbAHHAg5IPEax1pf6erJa2+MVFqJ7nc1lljvHCJ+K+YtazachulJvOQ7TVmpKGnMW5/E1byqipb0vGv7Sp4k/wBDoOjXB1aNvXzd2i9ddeDSV3NWTKu86x83edbgNG5PUeQTMakfV6pyo5KdTZ9VOxI/5W/0njPqTKbabGsY1GsakNa1IRE8SG5yseMO15rx18K9zPt8ys0/vmuE/wAX/wAj6XB8kzOUfpvpRucjVtnVGIs8M8PE11NElF/rkdpe9K1B9nWZaY6sy4cxUY570hqryXY1ak2zGuTivfxmsfEPodCtSuaLatCoypTdycxZRTkg+d9FWOu2ULu/q1KzbV8U6VJVXgevNzo5bbJPl8R9Ig52rk44clIpaaxLjgQckGQZc0QIOSBAHHAg5IEAccCDkgyBhiIEHJAgDjgQXBsAxxwIOSBAHHBqJsXBqJsFVAguBHcVcRAguO4QMEQILjuEdwwRAguBAEQILgR3ARAguO4R3DBECC47hHcMMRBx1bajXVi1aVOotN3Gzjai8LvGniXdTnjuPMa/urmx0lcXNpXq0KzH0+F9N6tVJciLyLEbOLWvlaIh6SBB8owuI1vncTQyVrqHgo1uLhbVuaiOSHK1ZhqpzRe0/Pl6GqcHdW9vkdW06L66KrV9UVnIiJCbwzbn95v6fea7fQjc8u31qtbUbhEStRp1ERdke1HR85xetlj+5W30TfyPAN0nr5zUcmpKcKkp/aqv6D8+RwGusZjbi+raia6lb01qORlzUVVREnaWoPD9kcUeotD6gjUaiIiIiImyJ2GweO6M767yWnbmve3Va4qpduaj6r1cqIjGLCT5VPaR3GJjJxyvTxtNUQILjuEdxMZRAguBHcMEQILjuEdwEQILgQBECC47hAEQILjuEdwwRAguO4R3DDEQaibFQaibDBcCC4EGlccGwXAgg44EHJAgGOODYLgQBxwIOSBAHHAg5IEAccCDkgQBEHkektPePd/46fpoexg8h0mp7xrz+ZT9NDVfuh04vvj/AK6/SudsNP8ARpj7q/rI1PduCmnw6i9a/ZqHgqlW51bq2nc5G8di3XSItnUexeFqIvgtau3bO/j8p6fD5jTFpoHFWWoKC1nObVqMatBzv+s/4LuX2/efi1FnW66p2+MwmBcqUnolO5qwzq/+1IXhai96+aTrEZMvVSMtM5+e349SUc7gchb46jqrI319VVJoUqtRFbPKfCXdexD21XE3eK6N8mzIXda6vqtq99Z9Wqr4Xh+Ciqq7J+Z4+1ts10e5h+SyWIZkGPSPVbXudwzzh0eCvlTyHpLzXmM1JpvK2drb3dO59RVXua9icLURu6yi8uSedBO9Yl4tOZ3H5X0SJOlLr5c/0GHvoPB9Eae9S6+XP9Cme/g53+6Xn5v7JccCDkgQYcnHAg5IEAccCDkgQDHHAg5IEAccCDkgQBxwIOSBAHHAg5IEARARC4NRCioEFwIKqIEFwIAiBBcCAIgQXAgCIEFwIGCIEFwIGCIEFwIAiDx/ScnvFvP5lP00PZweO6UNtCXn8yl6aFr7h04vvh+LRWBxma0FhVyNnTuOoWstNHzCKtV0+Xl2nU6gzmjcpXqYC+S7sbezqqlOratRtLiiFXhSe2UTZftOr0x0m0dPaetcW/F1K7qHH7olZGzxPc7lHec+T6SsHmKfBkdLNuNoRz6qcSeR3DKeZTp4zr0fTv5zMxOf9dtpbCZSjlqDsbqlmQwW61Go9HKiRsxWOlGz3d/I77UmDxmP03nbyzsaNvXq2T2vdSbw8SRPJNj5Ba5bD4/UdtkrKwvKdtSdxutlud1XsRHQixPNFn7T1ma6VqGVwt7j24mpTW4oupo9a6LwynOOETWdW/FfyiYd70QJ707r5c/0KZ9Ag8D0P76Su/lz/Qpn0GDFvcvPzf2SiBBcCDLkiBBcCAIgQXAgCIEFwIAiBBcCAIgQXAgCIEFwIAiDUQqDUQKqBBUCCiYEFQIAmBBUCAJgQVAgCYEFQIAmBBUCAJgQVAgCYOuzeDs9QY51hftetBXI+GO4VlOW52cCAsTncOvxGJtcHi6OOskclvR4uBHO4l3crl38qqfug+Va3y+Us+kjH2VpkbuhbVkoI+lTqqjVl6ou3LkfV4LMfLV6zERM/KYPzZCwo5PH3FjccXU12LTfwrCwvOFPk/TFTVc9jOBVR1W3VnPZfD2+8+xwJjIiVtTxiLfl02A03j9NWtW2xzajaVV/WOSo/i3hE/A7eCoEEliZmZ2UwIKgQETAgqBAEwIKgQBMCCoEATAgqBAEwIKgQBMCCoEATARCoNRArYNgqDIAyDIKgQUZAg2BAGQINgQBMCCoEAZAg2BBBkGQVAgCYEFQIKPiXSXcssukrH3VRHLToU6FRyN5qjXqqx8x6j25NO/ueU+ip/rPOdIlNlXpUxVOoxr6b227XNcko5FqLKKh9S9iunfiHF/U6f5G5zI16bTTxr5Q+Ka71fj9T5bHXdlRuadO2bD0rNair4U7QqnvPbk07+5ZT6Kn+s9f7FNO/EOL+p0/yHsV078Q4v6nT/IbVJvxzERMen5NL6tsdW0rmrY0Limy3c1ruvRqKqqirsiKviO/g/NY4rH4zrPUFjbWqVI40oUmsR0cpRETxqfrgxP6cbZvTIEGwIIyyDIKgQBMCCoEAZAg2BAEwbBsCCjIEGwIIJg2DYEAZARDYNRCwrQAEAAAAAAAAAAAAAAAAAD8GZy9rgsTcZG8fw0aLZhObl7Gp3qoWI3p8d15a1NQ9K9PFW9RGVFSlQ40SeDbiVfMiqdr7TmR/iT/ANLv1HD0X2NxntW5HVN43Zjn8K9nWv5onkaqp/5IfYjpNpjqHp5OS1MrX4fG7/onyFjjrq7XUPGlCk+qrUpOSeFFWPhdx2nQu51TF5WpUe97lrMbLnTsjV/M9/qD/hvKfI6voKeA6FP9z5T5Q30SbM1lPObcc6+oAAw8wAAAAAAAAAAAAAAAAAAAQGoFYAAAACAAAAAAAAAAAAAAeK17oi71ZSpPtsm+k+j8C2q/7FV7V2SUXv38x7UFicaraazsOr0/hLbTuEtsZbbtpN8J6pCvcu6uXyr/AFsdoARJnZ2X4czb1rvB39tbo11atbVKdNHLCK5WqiSvlPJdGmlsrpe1yFLJtpt697HU0p1OJNkVF/A92C71jUXmKzUABGAAAAAAAAAAAAAAAAAAADUMNQKwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQwBQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQw1ArAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1DDUCsA7QAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA1DDUCwwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANQw1ArAAAAAQAAAAAAAAAAAABQABAAAAAAAAAAAAAAAAAAAAAAAAAAADUMNQK/9k=\"","import { Button, Input, Popconfirm, Space, Switch, Table } from \"antd\";\r\nimport { ColumnsType, TablePaginationConfig } from \"antd/lib/table\";\r\nimport React from \"react\";\r\nimport { RouteComponentProps } from \"react-router\";\r\nimport { IMovieState } from \"../redux/reducer/Moviereducer\";\r\nimport { IMovie } from \"../Service/MovieService\";\r\nimport { SwitchType } from \"./CommonType\";\r\nimport defaultPosterImg from \"../assets/defaultPosterImg.png\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { ISearchCondition } from \"../Service/CommonType\";\r\nimport { SearchOutlined } from \"@ant-design/icons\";\r\n\r\nexport interface IMovieEventProps {\r\n  onLoad: () => void;\r\n  onSwitchState: (type: SwitchType, newState: boolean, id: string) => void;\r\n  onDeleteMovie: (id: string) => void;\r\n  onChangePage: (page:number) => void;\r\n  onChangeKey:(key:string) => void;\r\n  onSearch:() => void;\r\n}\r\nexport class MovieTable extends React.Component<\r\n  RouteComponentProps & IMovieState & IMovieEventProps\r\n> {\r\n  componentDidMount() {\r\n    this.props.onLoad();\r\n  }\r\n  getFilterDropdown() {\r\n    return (\r\n      <div style={{ padding: 8 }}>\r\n        <Input\r\n          style={{ width: 188, marginBottom: 8, display: \"block\" }}\r\n          onChange={(e)=>{\r\n              this.props.onChangeKey(e.target.value)\r\n          }}\r\n          onPressEnter={this.props.onSearch}\r\n          value={this.props.condition.key}\r\n        />\r\n        <Space>\r\n          <Button\r\n            type=\"primary\"\r\n            icon={<SearchOutlined />}\r\n            size=\"small\"\r\n            style={{ width: 90 }}\r\n            onClick={this.props.onSearch}\r\n          >\r\n            搜索\r\n          </Button>\r\n          <Button\r\n            size=\"small\"\r\n            style={{ width: 90 }}\r\n            onClick={()=>{\r\n                this.props.onChangeKey(\"\");\r\n                this.props.onSearch();\r\n            }}\r\n          >\r\n            重置\r\n          </Button>\r\n        </Space>\r\n      </div>\r\n    );\r\n  }\r\n  private getColums(): ColumnsType<IMovie> {\r\n    return [\r\n      {\r\n        title: \"封面\",\r\n        dataIndex: \"poster\",\r\n        render: (poster) => {\r\n          if (poster) {\r\n            return <img className=\"poster_img\" src={poster} alt=\"\" />;\r\n          }\r\n          return <img className=\"poster_img\" src={defaultPosterImg} alt=\"\" />;\r\n        },\r\n      },\r\n      {\r\n        title: \"名称\",\r\n        dataIndex: \"name\",\r\n        key: \"name\",\r\n        filterDropdown: this.getFilterDropdown(),\r\n        filterIcon: <SearchOutlined />,\r\n      },\r\n      {\r\n        title: \"地区\",\r\n        dataIndex: \"areas\",\r\n        render: (text) => {\r\n          return text.join(\",\");\r\n        },\r\n      },\r\n      {\r\n        title: \"类型\",\r\n        dataIndex: \"types\",\r\n        render: (text) => {\r\n          return text.join(\",\");\r\n        },\r\n      },\r\n      {\r\n        title: \"时长\",\r\n        dataIndex: \"timelong\",\r\n        render: (text) => {\r\n          return text + \"分钟\";\r\n        },\r\n      },\r\n      {\r\n        title: \"是否经典\",\r\n        dataIndex: \"isClassic\",\r\n        render: (isClassic, record) => {\r\n          return (\r\n            <Switch\r\n              checked={isClassic}\r\n              onChange={(newValue) => {\r\n                this.props.onSwitchState(\r\n                  SwitchType.isClassic,\r\n                  newValue,\r\n                  record._id!\r\n                );\r\n              }}\r\n            />\r\n          );\r\n        },\r\n      },\r\n      {\r\n        title: \"是否火爆\",\r\n        dataIndex: \"isHot\",\r\n        render: (isHot, record) => {\r\n          return (\r\n            <Switch\r\n              checked={isHot}\r\n              onChange={(newValue) => {\r\n                this.props.onSwitchState(\r\n                  SwitchType.isHot,\r\n                  newValue,\r\n                  record._id!\r\n                );\r\n              }}\r\n            />\r\n          );\r\n        },\r\n      },\r\n      {\r\n        title: \"是否上映\",\r\n        dataIndex: \"isSoonComing\",\r\n        render: (isSoonComing, record) => {\r\n          return (\r\n            <Switch\r\n              checked={isSoonComing}\r\n              onChange={(newValue) => {\r\n                this.props.onSwitchState(\r\n                  SwitchType.isSoonComing,\r\n                  newValue,\r\n                  record._id!\r\n                );\r\n              }}\r\n            />\r\n          );\r\n        },\r\n      },\r\n      {\r\n        title: \"操作\",\r\n        dataIndex: \"_id\",\r\n        render: (id) => {\r\n          return (\r\n            <>\r\n              <NavLink to={\"/movie/edit/\" + id}>\r\n                <Button type=\"primary\" size=\"small\">\r\n                  编辑\r\n                </Button>\r\n              </NavLink>\r\n              <Popconfirm\r\n                title=\"确认删除吗?\"\r\n                okText=\"确认\"\r\n                cancelText=\"取消\"\r\n                onConfirm={() => {\r\n                  this.props.onDeleteMovie(id);\r\n                }}\r\n              >\r\n                <Button type=\"primary\" danger size=\"small\">\r\n                  删除\r\n                </Button>\r\n              </Popconfirm>\r\n            </>\r\n          );\r\n        },\r\n      },\r\n    ];\r\n  }\r\n  getPageConfig(): false | TablePaginationConfig {\r\n    if (this.props.total === 0) {\r\n      return false;\r\n    }\r\n    return {\r\n      current: this.props.condition.page,\r\n      pageSize: this.props.condition.limit,\r\n      total: this.props.total,\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <Table\r\n        rowKey=\"_id\"\r\n        dataSource={this.props.data}\r\n        columns={this.getColums()}\r\n        pagination={this.getPageConfig()}\r\n        loading={this.props.isLoading}\r\n        onChange={(e) => {\r\n          this.props.onChangePage(e.current!);\r\n        }}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { ThunkAction } from \"redux-thunk\";\r\nimport { SwitchType } from \"../../component/CommonType\";\r\nimport { ISearchCondition } from \"../../Service/CommonType\";\r\nimport { IMovie, MovieService } from \"../../Service/MovieService\";\r\nimport { IMovieState } from \"../reducer/Moviereducer\";\r\nimport { IRootState } from \"../reducer/RootReducer\";\r\nimport { IAction } from \"./CommonType\";\r\n\r\nexport type SaveMovieAction = IAction<\"movie_save\",{\r\n    movie:IMovie[],\r\n    total:number,\r\n}>\r\n//保存电影数据\r\nfunction saveMovieData(movie:IMovie[],total:number):SaveMovieAction{\r\n    return {\r\n        type:\"movie_save\",\r\n        payload:{\r\n            movie:movie,\r\n            total:total,\r\n        }\r\n    }\r\n}\r\nexport type SetIsLoaing = IAction<\"movie_loading\", {\r\n    isLoading:boolean,\r\n}>\r\n//设置查询条件\r\nfunction setIsLoaing(isLoading:boolean):SetIsLoaing{\r\n    return {\r\n        type:\"movie_loading\",\r\n        payload:{\r\n            isLoading,\r\n        }\r\n    }\r\n}\r\n//设置查询条件\r\nexport type SetConditionAction = IAction<\"movie_condition\", ISearchCondition>\r\nfunction setCondition(condition:ISearchCondition):SetConditionAction{\r\n    return {\r\n        type:\"movie_condition\",\r\n        payload:{\r\n            ...condition\r\n        }\r\n    }\r\n}\r\n//删除电影\r\nexport type DeleteMovieAction = IAction<\"movie_delete\", {\r\n    id:string,\r\n}>\r\nfunction deleteMovieAction(id:string):DeleteMovieAction{\r\n    return {\r\n        type:\"movie_delete\",\r\n        payload:{\r\n            id,\r\n        }\r\n    }\r\n}\r\nexport type SwitchMovieAction = IAction<\"movie_switch\",{type:SwitchType,newState:boolean,id:string}>\r\nfunction changeSwitchType(type:SwitchType,newState:boolean,id:string):SwitchMovieAction{\r\n    return {\r\n        type:\"movie_switch\",\r\n        payload:{\r\n            type,\r\n            newState,\r\n            id,\r\n        }\r\n    }\r\n}\r\n//副作用处理thunk\r\n//查询电影\r\nfunction fetchMovie(condition:ISearchCondition)\r\n:ThunkAction<Promise<void>,IRootState,any,MovieActions>{\r\n    return async (dispatch,getState)=>{\r\n        //开始加载\r\n        dispatch(setIsLoaing(true));\r\n        //设置查找条件\r\n        dispatch(setCondition(condition));\r\n        console.log(getState());\r\n        const searchCondition = getState().movie.condition;\r\n        //查找\r\n        const resp = await MovieService.find(searchCondition);\r\n        dispatch(saveMovieData(resp.data,resp.total));\r\n        //停止加载\r\n        dispatch(setIsLoaing(false));\r\n    }\r\n}\r\n//删除电影\r\nfunction deleteMovie(id:string)\r\n:ThunkAction<Promise<void>,IRootState,any,MovieActions>{\r\n    return async (dispatch)=>{\r\n        dispatch(setIsLoaing(true));\r\n        await MovieService.delete(id);\r\n        dispatch(deleteMovieAction(id));//删除状态中的电影数据\r\n        dispatch(setIsLoaing(false));\r\n    }\r\n}\r\n//改变switch状态\r\nfunction switchChange(type:SwitchType,newState:boolean,id:string)\r\n:ThunkAction<Promise<void>,IRootState,any,MovieActions>{\r\n    return async (dispatch)=>{\r\n        dispatch(changeSwitchType(type,newState,id));\r\n        await MovieService.edit(id,{\r\n            [type]:newState,\r\n        })\r\n    }\r\n}\r\nexport type MovieActions = SaveMovieAction | SetIsLoaing | SetConditionAction | DeleteMovieAction | SwitchMovieAction;\r\n//导出action\r\nexport  default {\r\n    saveMovieData,\r\n    setIsLoaing,\r\n    setCondition,\r\n    deleteMovieAction,\r\n    fetchMovie,\r\n    deleteMovie,\r\n    changeSwitchType,\r\n    switchChange,\r\n}\r\n","import { IMovieEventProps, MovieTable } from '../../component/MovieTable';\r\nimport {connect} from \"react-redux\"\r\nimport { IRootState } from '../../redux/reducer/RootReducer';\r\nimport { Dispatch } from 'react';\r\nimport MovieAction, { MovieActions } from '../../redux/action/MovieAction';\r\nimport { MovieService } from '../../Service/MovieService';\r\n\r\nfunction mapStateToProps(state:IRootState){\r\n    return state.movie;\r\n}\r\nfunction mapDispatchToProps(dispatch:Dispatch<any>):IMovieEventProps{\r\n    return {\r\n        onLoad(){\r\n            dispatch(MovieAction.fetchMovie({\r\n                page:1,\r\n                limit:10,\r\n                key:''\r\n            }))\r\n        },\r\n        onSwitchState(type,newState,id){\r\n            dispatch(MovieAction.switchChange(type,newState,id));\r\n        },\r\n        async onDeleteMovie(id){\r\n            await dispatch(MovieAction.deleteMovie(id));\r\n            await dispatch(MovieAction.fetchMovie({}));\r\n        },\r\n        async onChangePage(page){\r\n            dispatch(MovieAction.setCondition({\r\n                page,\r\n            }));\r\n            await dispatch(MovieAction.fetchMovie({}));\r\n        },\r\n        onChangeKey(key){\r\n            dispatch(MovieAction.setCondition({\r\n                key,\r\n            }))\r\n        },\r\n        async onSearch(){\r\n            await dispatch(MovieAction.fetchMovie({\r\n                page:1,\r\n            }))\r\n        }\r\n    }\r\n}\r\nexport const MovieList = connect(mapStateToProps,mapDispatchToProps)(MovieTable);","import React from \"react\";\r\nimport { NavLink, Route } from \"react-router-dom\";\r\nimport { Home } from \"./Home\";\r\nimport { AddMovie } from \"./movie/AddMovie\";\r\nimport { EditMovie } from \"./movie/EditMovie\";\r\nimport { MovieList } from \"./movie/MovieList\";\r\nimport { Layout, Menu } from \"antd\";\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nconst _Layout: React.FC = function () {\r\n  return (\r\n    <div>\r\n      <Layout className=\"layout-wrapper\"  style={{ minHeight: '100vh' }}>\r\n        <Header>\r\n          <NavLink to=\"/\">猫眼电影管理系统</NavLink>\r\n        </Header>\r\n        <Layout>\r\n          <Sider>\r\n            <Menu mode=\"inline\" theme=\"dark\">\r\n              <Menu.Item key=\"1\">\r\n                <NavLink to=\"/movie\">电影列表</NavLink>\r\n              </Menu.Item>\r\n              <Menu.Item key=\"2\">\r\n                <NavLink to=\"/movie/add\">添加电影</NavLink>\r\n              </Menu.Item>\r\n            </Menu>\r\n          </Sider>\r\n          <Content>\r\n            <div>\r\n              <Route path=\"/\" component={Home} exact={true}></Route>\r\n              <Route path=\"/movie\" component={MovieList} exact={true}></Route>\r\n              <Route path=\"/movie/add\" component={AddMovie}></Route>\r\n              <Route path=\"/movie/edit/:id\" component={EditMovie}></Route>\r\n            </div>\r\n          </Content>\r\n        </Layout>\r\n      </Layout>\r\n    </div>\r\n  );\r\n};\r\nexport default _Layout;\r\n","import { Reducer } from \"react\";\r\nimport { ISearchCondition } from \"../../Service/CommonType\";\r\nimport { IMovie, MovieService } from \"../../Service/MovieService\";\r\nimport {\r\n  DeleteMovieAction,\r\n  MovieActions,\r\n  SaveMovieAction,\r\n  SetConditionAction,\r\n  SetIsLoaing,\r\n  SwitchMovieAction,\r\n} from \"../action/MovieAction\";\r\n\r\nexport type IMovieCondition = Required<ISearchCondition>;\r\ntype MovieReducer<T> = Reducer<IMovieState, T>;\r\n//电影状态\r\nexport interface IMovieState {\r\n  //电影数组\r\n  data: IMovie[];\r\n  //查询条件\r\n  condition: IMovieCondition;\r\n  //电影总数\r\n  total: number;\r\n  //是否正在加载\r\n  isLoading: boolean;\r\n  //页数\r\n  totalPage: number;\r\n}\r\nconst defaultState: IMovieState = {\r\n  data: [],\r\n  condition: {\r\n    page: 1,\r\n    limit: 10,\r\n    key: \"\",\r\n  },\r\n  total: 0,\r\n  isLoading: false,\r\n  totalPage: 0,\r\n};\r\nconst saveMovie: MovieReducer<SaveMovieAction> = function (state, action) {\r\n  return {\r\n    ...state,\r\n    total: action.payload.total,\r\n    data: action.payload.movie,\r\n    totalPage: Math.ceil(action.payload.total / state.condition.limit),\r\n  };\r\n};\r\nconst setLoading: MovieReducer<SetIsLoaing> = function (state, action) {\r\n  return {\r\n    ...state,\r\n    isLoading: action.payload.isLoading,\r\n  };\r\n};\r\nconst setCondition: MovieReducer<SetConditionAction> = function (\r\n  state,\r\n  action\r\n) {\r\n  const newState = {\r\n    ...state,\r\n    condition: {\r\n      ...state.condition,\r\n      ...action.payload,\r\n    },\r\n  };\r\n  newState.totalPage = Math.ceil(newState.totalPage / newState.condition.limit);\r\n  return newState;\r\n};\r\nconst changeSwitch: MovieReducer<SwitchMovieAction> = function (state, action) {\r\n  const movie = state.data.find((item) => {\r\n    return item._id === action.payload.id;\r\n  });\r\n  if (!movie) {\r\n    return state;\r\n  }\r\n  const newMovie = { ...movie };\r\n  newMovie[action.payload.type] = action.payload.newState;\r\n  return {\r\n    ...state,\r\n    data: state.data.map((item) => {\r\n      if (item._id === action.payload.id) {\r\n        return newMovie;\r\n      }\r\n      return item;\r\n    }),\r\n  };\r\n};\r\nconst deleteMovie: MovieReducer<DeleteMovieAction> = function (state, action) {\r\n  return {\r\n    ...state,\r\n    data: state.data.filter((item) => {\r\n      return item._id !== action.payload.id;\r\n    }),\r\n    total: state.total - 1,\r\n    totalPage: Math.ceil((state.total - 1) / state.condition.limit),\r\n  };\r\n};\r\nexport default function (\r\n  state: IMovieState = defaultState,\r\n  action: MovieActions\r\n) {\r\n  switch (action.type) {\r\n    case \"movie_delete\":\r\n      return deleteMovie(state, action);\r\n    case \"movie_save\":\r\n      return saveMovie(state, action);\r\n    case \"movie_loading\":\r\n      return setLoading(state, action);\r\n    case \"movie_condition\":\r\n      return setCondition(state, action);\r\n    case \"movie_switch\":\r\n      return changeSwitch(state,action);\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from \"redux\";\r\nimport movie, { IMovieState } from \"./Moviereducer\";\r\n\r\n/**\r\n * 整个网站的根状态\r\n */\r\nexport interface IRootState{\r\n    movie:IMovieState,\r\n}\r\nexport  const rootReducer = combineReducers({\r\n    movie,\r\n})","import { applyMiddleware, createStore } from \"redux\";\r\nimport {IRootState, rootReducer} from \"./reducer/RootReducer\";\r\nimport logger from \"redux-logger\";\r\nimport thunk, { ThunkMiddleware } from \"redux-thunk\"\r\n\r\nexport const store = createStore(rootReducer,applyMiddleware(thunk as ThunkMiddleware<IRootState>,logger));","import React from \"react\";\nimport logo from \"./logo.svg\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport Layout from \"./page/Layout\";\nimport { Provider } from \"react-redux\";\nimport { store } from \"./redux/store\";\nfunction App() {\n  return (\n    <Provider store={store}>\n      <BrowserRouter>\n        <Route path=\"/\" component={Layout} />\n      </BrowserRouter>\n    </Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'antd/dist/antd.css';\nimport './index.css';\nimport App from './App';\nimport {store} from './redux/store'\nimport { ISearchCondition } from './Service/CommonType';\n\nReactDOM.render(\n    <App />\n  ,document.getElementById('root')\n);\n\n\nconst m:any = {\n  name:\"苏东坡\",\n  types:[\"古装\"],\n  areas:[\"中国大陆\"],\n  timelong:122,\n  isHot:true,\n  isSoonComing:true,\n  isClassic:true,\n\n}\nstore.subscribe(()=>{\n  console.log(store.getState())\n})\nconst condition:ISearchCondition = {\n  page:2,\n  limit:10,\n}\n// store.dispatch(MovieAction.fetchMovie(condition)).then(result=>{\n//   store.dispatch(MovieAction.deleteMovie(\"60322afb7f07cc5488913f73\"));\n// }).then(result=>{\n//   console.log(result)\n// })\n\n\n\n"],"sourceRoot":""}